<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shopping Cart | Bean Boutique</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="style.css">
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

<header class="site-header">
  <div class="logo">
    <img src="logo.png" alt="Bean Boutique">
    <span>Bean Boutique</span>
  </div>

  <button class="menu-toggle" onclick="toggleMenu()">
    ☰
  </button>

  <nav class="nav-links" id="navLinks">
    <a href="index.html">Home</a>
    <a href="coffee-selection.html">Beans</a>
    <a href="brewing.html">Brewing</a>
    <a href="events.html">Events</a>
    <a href="contact.html">Contact</a>
    <a href="offers.html">Offers</a>
    <a href="cart.html" class="cart-icon">
      <i class="fa-solid fa-cart-shopping"></i>
      <span id="cartCount">0</span>
    </a>
  </nav>
</header>

<section class="info">
  <h2>Your Shopping Cart</h2>
  <p>Review your selected coffees and equipment.</p>
</section>

<section class="cart-section">
  <div class="cart-container" id="cartItems"></div>

  <div class="cart-summary">
    <h3>Order Summary</h3>

    <p>Total Items: <span id="itemCount">0</span></p>
    <p>Subtotal: $<span id="subtotalPrice">0</span></p>

    <!-- COUPON INPUT -->
    <input type="text" id="couponCode" placeholder="Enter coupon code">
    <button onclick="applyCoupon()">Apply Coupon</button>

    <p>Discount: $<span id="discountAmount">0</span></p>
    <p><b>Total Price: $<span id="totalPrice">0</span></b></p>

    <button class="checkout-btn">Proceed to Checkout</button>
  </div>
</section>

<footer>
  <a href="https://www.instagram.com" class="instagram"><i class="fa-brands fa-instagram"></i></a>
  <a href="https://www.facebook.com" class="facebook"><i class="fa-brands fa-facebook"></i></a>
  <a href="https://www.twitter.com" class="twitter"><i class="fa-brands fa-twitter"></i></a>
  
  <br><br>
  © 2026 Bean Boutique | Brewed with ❤️
</footer>

<script>
const cartContainer = document.getElementById("cartItems");
const itemCountEl = document.getElementById("itemCount");
const subtotalEl = document.getElementById("subtotalPrice");
const totalPriceEl = document.getElementById("totalPrice");
const discountEl = document.getElementById("discountAmount");

let cart = JSON.parse(localStorage.getItem("beanCart")) || [];
let discount = 0;

// available coupons
const coupons = {
  "WELCOME10": 0.10,
  "BREW5": 0.05,
  "FREESHIP": 0.15
};

function renderCart(){
  cartContainer.innerHTML = "";

  let subtotal = 0;
  let count = 0;

  if(cart.length === 0){
    cartContainer.innerHTML = "<p class='empty'>Put some caffeine ☕</p>";
  }

  cart.forEach((item,index)=>{
    subtotal += item.price * item.qty;
    count += item.qty;

    const div=document.createElement("div");
    div.className="cart-item";

    div.innerHTML=`
      <img src="${item.image}">
      <div class="cart-details">
        <h4>${item.name}</h4>
        <p>$${item.price}</p>
        <input type="number" min="1" value="${item.qty}"
        onchange="updateQty(${index},this.value)">
      </div>
      <button class="remove-btn" onclick="removeItem(${index})">✕</button>
    `;

    cartContainer.appendChild(div);
  });

  let finalTotal = subtotal - discount;

  itemCountEl.innerText = count;
  subtotalEl.innerText = subtotal.toFixed(2);
  totalPriceEl.innerText = finalTotal.toFixed(2);

  localStorage.setItem("beanCart", JSON.stringify(cart));
}

function updateQty(index,value){
  cart[index].qty=parseInt(value);
  renderCart();
}

function removeItem(index){
  cart.splice(index,1);
  renderCart();
}

function applyCoupon(){
  const code=document.getElementById("couponCode").value.toUpperCase();
  let subtotal=parseFloat(subtotalEl.innerText);

  if(coupons[code]){
    discount=subtotal * coupons[code];
    discountEl.innerText=discount.toFixed(2);
    alert("Coupon Applied ✅");
  } else{
    discount=0;
    discountEl.innerText=0;
    alert("Invalid coupon ❌");
  }

  renderCart();
}

renderCart();
function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem("beanCart")) || [];
  const total = cart.reduce((sum,item)=>sum + item.qty,0);

  const countEl=document.getElementById("cartCount");
  if(countEl) countEl.innerText=total;
}

updateCartCount();
</script>
</body>
</html>
